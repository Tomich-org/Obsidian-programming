# Этапы загрузки
[[Excalidraw/Процесс загрузки Linux]]
1. ЦП переходит на адрес BIOS и загружает BIOS
2. BIOS выполняет кучу проверок и выбирает согласно своим настройкам носитель информации
3. На носителе находится MBR (master boot record) или GPT (GUID Partition Table), в котором находится загрузчик
4. Загрузчик может запускать сразу ОС, а может передать управление следующему загрузчику (Если и Linux и Windows установлены на одном ПК на нескольких разделах жесткого диска)
5. В случае Linux чаще всего есть первая стадия загрузки - часть машинного кода, которая запускает загрузчик - вторая стадия
6. Загрузчик знает где расположено ядро ОС, загружает его и initial RAM disk (конфиг файлы которые необходимы для загрузки ядра)
7. Затем ядро берет дальнейший процесс запуска на себя: происходит инициализация устройств, конфигурирование процессов, памяти и т.д.
8. Затем запускается процесс Init
# Загрузчики
![[Pasted image 20250729114257.png]]
LILO и GRUB работают в два этапа: Крошечный машинный код на MBR или GPT разделе, который запускает загрузчик второго этапа

Команда для вывода сообщений ядра:
```bash
dmesg
```
Она покажет все сообщения ядра

А есть еще лог :
```bash
cat /var/log/dmesg
```
Он содержит информацию о загрузке (запуске системы)
# Система инициализации ОС
**Init** - первый процесс (или же родительский), который запускает все последующие процессы.
Это может быть проверка и монтировка файловых систем, запуск служб и т.д.

Есть три варианта работы этого родительского процесса:
1. **Init в стиле SysV** - родительский процесс инициализации системы на одном из заданных уровней запуска (runlevel). Загрузка основана на уровнях запуска:   
   Есть несколько уровней загрузки (обычно их 7). Один из них как правило это обычный многопользовательский режим, а остальные это загрузки выключения ПК, перезагрузка, режим восстановления и т.д.
2. **Init в стиле systemd** - родительский процесс инициализации системы в ускоренном режиме, за счет параллельного запуска задач. У этого стиля есть еще огромная куча разного дополнительного софта, библиотек, служб и т.д.
3. **Init в стиле Upstart** - родительский процесс инициализации системы на основе отслеживания событий. Здесь не только происходит скрипты инициализации, но и происходит отслеживание событий и реагирование на них.
   
   Например, если какая-то служба не запустилась, или упала в процессе загрузки, то Uppstart может это отследить и запустить ее повторно

---
Дерево процессов вызывается командой `pstree`
