**Написание pipeline в TeamCity**: В TeamCity можно создавать конфигурации сборки как через  
веб-интерфейс, так и кодом с помощью Kotlin DSL. Компания JetBrains предоставляет механизм  **Versioned Settings**: вы включаете «Versioned Settings» в проекте и выбираете режим Kotlin. Тогда  TeamCity экспортирует текущую конфигурацию (build steps, настройки VCS, параметры) в файл  `*.kts` в репозитории . Этот код можно редактировать в IDE и коммитить обратно в VCS.  Таким образом мы получаем полностью версионированный pipeline как код (аналог IaC) .  

Процесс: создаёте новый проект на основе существующего кода (TeamCity обнаружит шаги  
сборки), затем включаете «Versioned Settings» – и TeamCity автоматически генерирует папку  
`.teamcity` с Kotlin-скриптами. После этого все изменения в пайплайне делают через код, что  упрощает аудит и перенос конфигурации между серверами .

`Использование IaC в TeamCity`: благодаря Kotlin DSL можно применять подход Infrastructure as  Code к конфигурации CI/CD. Конфигурации хранятся в Git: любые изменения отслеживаются,  ревьюдятся и повторяемы. Это позволяет безопасно масштабировать сборки – так же, как  Terraform/Ansible управляют серверами, TeamCity-config-as-code управляет сборочными  конвейерами. При необходимости можно автоматически создавать билды по шаблону или  динамически генерировать проекты (есть API Kotlin для этого).