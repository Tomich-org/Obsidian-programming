После того как мы написали код (конфигурацию), последовательность действий обычно такова:  
- **Инициализация** ( `terraform init` ). Первым делом нужно инициализировать каталог с   конфигурацией. Команда `terraform init` скачивает плагины-провайдеры (в нашем  случае AWS) и настраивает backend для хранения state . В результате вы увидите  сообщение об успешной инициализации.  
- **Формирование плана** ( `terraform plan` ). Затем запускают `terraform plan` . Эта  команда просматривает код, state-файл и реальное облако, сравнивает их и выводит план  действий: что будет создано/изменено/удалено. На этом этапе никаких ресурсов ещё не  создаётся – вы просто проверяете, верно ли описали инфраструктуру. Если есть ошибки в  конфигурации, `plan` сообщит о них .  
- **Применение конфигурации** ( `terraform apply` ). Когда план вас устраивает, выполняют  `terraform apply` . По умолчанию он повторно формирует тот же план и спрашивает  подтверждение, затем выполняет его. После этого Terraform совершает API-вызовы к  облаку и создаёт ресурсы. В нашем примере после успешного `apply` в AWS появится EC2-  инстанс с указанными параметрами . Также Terraform обновит state-файл, сохранив в  нём данные о вновь созданном инстансе (например, его ID).  
- **Проверка результатов**. В ходе `apply` или сразу после можно увидеть вывод (output) –  например, Terraform может показать ID созданного ресурса. Сам инстанс станет виден в  консоли AWS. Теперь инфраструктура соответствует тому, что вы описали в коде. Если вы  затем измените параметры в конфиге (например, другой `ami` ), повторный `plan`  покажет, какие изменения будут сделаны (старый инстанс заменится на новый и т.д.).  

Во время этих этапов Terraform автоматически учитывает зависимости: например, если бы  
инстансу был нужен отдельный ресурс сети, Terraform сначала создаст сеть, а потом машину. В  команду `apply` можно также передать план, заранее сохранённый через` terraform plan - out=plan.tfplan` , чтобы автоматизировать процесс. Главное – знать, что каждый шаг ( `init`  → `plan` → `apply` ) имеет свою роль: init подготавливает окружение, plan проверяет  конфигурацию, а apply непосредственно изменяет облачные ресурсы.